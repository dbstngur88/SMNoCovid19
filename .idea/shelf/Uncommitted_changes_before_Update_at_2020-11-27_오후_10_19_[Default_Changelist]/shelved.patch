Index: app/src/main/java/com/example/smnocovid19/TimeLineActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.smnocovid19;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Context;\r\nimport android.nfc.Tag;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ListAdapter;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.GenericTypeIndicator;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Date;\r\nimport java.util.Map;\r\n\r\npublic class TimeLineActivity extends AppCompatActivity {\r\n    List<User> timeLineList = new ArrayList<>();\r\n    private FirebaseAuth fAuth;\r\n    FirebaseFirestore fStore;\r\n    private FirebaseUser currentUser;\r\n    RecyclerView mRecyclerView;\r\n    Context context;\r\n\r\n    RecyclerView.LayoutManager layoutManager;\r\n\r\n    TimeLineAdapter adapter;\r\n    private DatabaseReference timeLineDbRef;\r\n    private static final String TAG = \"TimeLineActivity\";\r\n    TextView txtBuilding;\r\n    TextView txtFloor;\r\n    TextView txtTime;\r\n    TextView txtUserNumber;\r\n    String number;\r\n    String userEmail;\r\n    String fStoreStudentNumber;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_time_line);\r\n        setTitle(\"Time Line\");\r\n\r\n        fAuth = FirebaseAuth.getInstance();\r\n        fStore = FirebaseFirestore.getInstance();\r\n        currentUser = fAuth.getCurrentUser();\r\n        userEmail = currentUser.getEmail();\r\n\r\n        txtBuilding = findViewById(R.id.txtBuilding);\r\n        txtFloor = findViewById(R.id.txtFloor);\r\n        txtTime = findViewById(R.id.txtTime);\r\n        txtUserNumber = findViewById(R.id.txtUserNumber);\r\n        //recyclerview 설정\r\n        mRecyclerView = findViewById(R.id.timeline_view);\r\n        layoutManager = new LinearLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n        timeLineList = new ArrayList<>();\r\n        //어뎁터 선언시 초기화\r\n        adapter = new TimeLineAdapter(TimeLineActivity.this, timeLineList, context);\r\n        mRecyclerView.setAdapter(adapter);\r\n        //유저 정보 불러오기 메소드 실행\r\n        getUserNumber();\r\n        getTimeLine();\r\n\r\n        //타임라인 불러오기 메소드 실행\r\n\r\n    }\r\n    public void getTimeLine() {\r\n        FirebaseDatabase.getInstance().getReference().child(\"timeline_\"+\"2016244097\")\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        timeLineList.clear();\r\n                        for(DataSnapshot s : snapshot.getChildren()){\r\n                            User user = s.getValue(User.class);\r\n                            timeLineList.add(user);\r\n                        }\r\n                        //timeline 갱신후 notify\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        Log.w(TAG, error.toString());\r\n                    }\r\n                });\r\n    }\r\n    public void getUserNumber() {\r\n        final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"email\", userEmail)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                fStoreStudentNumber = (String)document.get(\"studentnumber\");\r\n                                txtUserNumber.setText(fStoreStudentNumber);\r\n                            }\r\n                        } else {\r\n                            Toast.makeText(TimeLineActivity.this, \"에러 발생\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(revision 9dd6f239fbefd3d0ae3e7597bf8a013d5926c88a)
+++ app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(date 1606470561076)
@@ -47,18 +47,17 @@
     private FirebaseUser currentUser;
     RecyclerView mRecyclerView;
     Context context;
-
+    private DatabaseReference mDatabase;
     RecyclerView.LayoutManager layoutManager;
 
     TimeLineAdapter adapter;
-    private DatabaseReference timeLineDbRef;
     private static final String TAG = "TimeLineActivity";
     TextView txtBuilding;
     TextView txtFloor;
     TextView txtTime;
     TextView txtUserNumber;
-    String number;
     String userEmail;
+    String userNumber;
     String fStoreStudentNumber;
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -70,7 +69,6 @@
         fStore = FirebaseFirestore.getInstance();
         currentUser = fAuth.getCurrentUser();
         userEmail = currentUser.getEmail();
-
         txtBuilding = findViewById(R.id.txtBuilding);
         txtFloor = findViewById(R.id.txtFloor);
         txtTime = findViewById(R.id.txtTime);
@@ -83,15 +81,15 @@
         //어뎁터 선언시 초기화
         adapter = new TimeLineAdapter(TimeLineActivity.this, timeLineList, context);
         mRecyclerView.setAdapter(adapter);
+        mDatabase = FirebaseDatabase.getInstance().getReference();
+        userNumber = "2016244097";
         //유저 정보 불러오기 메소드 실행
         getUserNumber();
-        getTimeLine();
-
         //타임라인 불러오기 메소드 실행
-
+        getTimeLine();
     }
     public void getTimeLine() {
-        FirebaseDatabase.getInstance().getReference().child("timeline_"+"2016244097")
+        mDatabase.child("timeline_"+fStoreStudentNumber)
                 .addValueEventListener(new ValueEventListener() {
                     @Override
                     public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -121,6 +119,7 @@
                         if (task.isSuccessful()) {
                             for (QueryDocumentSnapshot document : task.getResult()) {
                                 fStoreStudentNumber = (String)document.get("studentnumber");
+                                Log.d(TAG+"",fStoreStudentNumber);
                                 txtUserNumber.setText(fStoreStudentNumber);
                             }
                         } else {
Index: app/src/main/res/layout/activity_time_line.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".TimeLineActivity\">\r\n    <TextView\r\n        android:id=\"@+id/txtUserNumber\"\r\n        android:layout_width=\"200dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"학번:\"\r\n        android:textSize=\"30dp\">\r\n    </TextView>\r\n<LinearLayout\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:layout_margin=\"10dp\">\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/timeline_view\"\r\n        tools:listitem=\"@layout/timeline_item\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_width=\"match_parent\"\r\n        app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"/>\r\n   </LinearLayout>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_time_line.xml	(revision 9dd6f239fbefd3d0ae3e7597bf8a013d5926c88a)
+++ app/src/main/res/layout/activity_time_line.xml	(date 1606481227412)
@@ -6,13 +6,22 @@
     android:layout_height="match_parent"
     android:orientation="vertical"
     tools:context=".TimeLineActivity">
-    <TextView
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        >  <TextView
         android:id="@+id/txtUserNumber"
-        android:layout_width="200dp"
+        android:layout_width="match_parent"
         android:layout_height="wrap_content"
-        android:text="학번:"
+        android:text="학번"
+        android:textStyle="bold"
+        android:gravity="center"
         android:textSize="30dp">
-    </TextView>
+    </TextView></LinearLayout>
+
+
+
+
 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="match_parent"
