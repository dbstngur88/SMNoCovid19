Index: app/src/main/java/com/example/smnocovid19/TimeLineActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.smnocovid19;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Context;\r\nimport android.nfc.Tag;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ListAdapter;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.GenericTypeIndicator;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Date;\r\nimport java.util.Map;\r\n\r\npublic class TimeLineActivity extends AppCompatActivity {\r\n    List<User> timeLineList = new ArrayList<>();\r\n    RecyclerView mRecyclerView;\r\n    Context context;\r\n\r\n    RecyclerView.LayoutManager layoutManager;\r\n\r\n    TimeLineAdapter adapter;\r\n    private DatabaseReference timeLineDbRef;\r\n    private static final String TAG = \"TimeLineActivity\";\r\n    TextView txtBuilding;\r\n    TextView txtFloor;\r\n    TextView txtTime;\r\n    TextView txtUserNumber;\r\n    String number;\r\n    String userEmail;\r\n    String fStoreStudentNumber;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_time_line);\r\n        setTitle(\"Time Line\");\r\n\r\n        txtBuilding = findViewById(R.id.txtBuilding);\r\n        txtFloor = findViewById(R.id.txtFloor);\r\n        txtTime = findViewById(R.id.txtTime);\r\n        txtUserNumber = findViewById(R.id.txtUserNumber);\r\n        //recyclerview 설정\r\n        mRecyclerView = findViewById(R.id.timeline_view);\r\n        layoutManager = new LinearLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n        timeLineList = new ArrayList<>();\r\n        //어뎁터 선언시 초기화\r\n        adapter = new TimeLineAdapter(TimeLineActivity.this, timeLineList, context);\r\n        mRecyclerView.setAdapter(adapter);\r\n        //유저 정보 불러오기 메소드 실행\r\n        getUserNumber();\r\n        getTimeLine();\r\n\r\n        //타임라인 불러오기 메소드 실행\r\n\r\n    }\r\n    public void getTimeLine() {\r\n        FirebaseDatabase.getInstance().getReference().child(\"timeline_\"+\"2016244097\")\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        timeLineList.clear();\r\n                        for(DataSnapshot s : snapshot.getChildren()){\r\n                            User user = s.getValue(User.class);\r\n                            timeLineList.add(user);\r\n                        }\r\n                        //timeline 갱신후 notify\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        Log.w(TAG, error.toString());\r\n                    }\r\n                });\r\n    }\r\n    public void getUserNumber() {\r\n        final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"email\", userEmail)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                fStoreStudentNumber = (String)document.get(\"studentnumber\");\r\n                                txtUserNumber.setText(fStoreStudentNumber);\r\n                            }\r\n                        } else {\r\n                            Toast.makeText(TimeLineActivity.this, \"에러 발생\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(revision 43c82a9b471e4d1b8801563799ab225c845d7b88)
+++ app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(date 1606467995361)
@@ -48,7 +48,6 @@
     RecyclerView.LayoutManager layoutManager;
 
     TimeLineAdapter adapter;
-    private DatabaseReference timeLineDbRef;
     private static final String TAG = "TimeLineActivity";
     TextView txtBuilding;
     TextView txtFloor;
