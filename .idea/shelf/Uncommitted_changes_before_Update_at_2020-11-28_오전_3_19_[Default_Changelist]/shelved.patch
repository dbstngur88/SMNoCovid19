Index: app/src/main/java/com/example/smnocovid19/TimeLineActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.smnocovid19;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.nfc.Tag;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ListAdapter;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.GenericTypeIndicator;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.sql.Time;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Date;\r\nimport java.util.Map;\r\n\r\npublic class TimeLineActivity extends AppCompatActivity {\r\n    List<User> timeLineList = new ArrayList<>();\r\n    private FirebaseAuth fAuth;\r\n    FirebaseFirestore fStore;\r\n    private FirebaseUser currentUser;\r\n    RecyclerView mRecyclerView;\r\n    Context context;\r\n    private DatabaseReference mDatabase;\r\n    RecyclerView.LayoutManager layoutManager;\r\n\r\n    TimeLineAdapter adapter;\r\n    private static final String TAG = \"TimeLineActivity\";\r\n    TextView txtBuilding;\r\n    TextView txtFloor;\r\n    TextView txtTime;\r\n    TextView txtUserNumber;\r\n    String userEmail;\r\n    String fStoreStudentNumber;\r\n    String userNumber;\r\n    String indexNum;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_time_line);\r\n        setTitle(\"사용자의 동선이동 타임라인\");\r\n\r\n        //액션바 안보이게 지정\r\n        ActionBar actionBar = getSupportActionBar();\r\n        actionBar.hide();\r\n\r\n        fAuth = FirebaseAuth.getInstance();\r\n        fStore = FirebaseFirestore.getInstance();\r\n        currentUser = fAuth.getCurrentUser();\r\n        userEmail = currentUser.getEmail();\r\n        txtBuilding = findViewById(R.id.txtBuilding);\r\n        txtFloor = findViewById(R.id.txtFloor);\r\n        txtTime = findViewById(R.id.txtTime);\r\n        txtUserNumber = findViewById(R.id.txtUserNumber);\r\n        //recyclerview 설정\r\n        mRecyclerView = findViewById(R.id.timeline_view);\r\n        layoutManager = new LinearLayoutManager(this);\r\n        mRecyclerView.setLayoutManager(layoutManager);\r\n        timeLineList = new ArrayList<>();\r\n        //어뎁터 선언시 초기화\r\n        adapter = new TimeLineAdapter(TimeLineActivity.this, timeLineList, context);\r\n        mRecyclerView.setAdapter(adapter);\r\n        mDatabase = FirebaseDatabase.getInstance().getReference();\r\n\r\n        getUserNumber();\r\n        //유저 정보 불러오기 메소드 실행\r\n\r\n        //타임라인 불러오기 메소드 실행\r\n\r\n    }\r\n    public void getTimeLine() {\r\n        mDatabase.child(\"timeline_\"+indexNum)\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        timeLineList.clear();\r\n                        for(DataSnapshot s : snapshot.getChildren()){\r\n                            User user = s.getValue(User.class);\r\n                            timeLineList.add(user);\r\n                        }\r\n                        //timeline 갱신후 notify\r\n                        adapter.notifyDataSetChanged();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        Log.w(TAG, error.toString());\r\n                    }\r\n                });\r\n    }\r\n    public void getUserNumber() {\r\n\r\n        final FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"email\", userEmail)\r\n                .get()\r\n                .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                        if (task.isSuccessful()) {\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                fStoreStudentNumber = (String)document.get(\"studentnumber\");\r\n                                txtUserNumber.setText(fStoreStudentNumber+\"님의 타임라인\");\r\n                                userNumber = txtUserNumber.getText().toString();\r\n                                int idx = userNumber.indexOf(\"님\");\r\n                                indexNum = userNumber.substring(0,idx);\r\n                                Log.d(TAG+\"\", indexNum);\r\n                                getTimeLine();\r\n                            }\r\n                        } else {\r\n                            Toast.makeText(TimeLineActivity.this, \"에러 발생\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(revision a304322ddbd1c4747b1b27ebca1a0550b25ed29d)
+++ app/src/main/java/com/example/smnocovid19/TimeLineActivity.java	(date 1606500644162)
@@ -59,16 +59,18 @@
     TextView txtBuilding;
     TextView txtFloor;
     TextView txtTime;
-    TextView txtUserNumber;
+    TextView txtUserInfo;
+    String userInfo;
     String userEmail;
     String fStoreStudentNumber;
+    String fStoreName;
+    String fStoreMajor;
     String userNumber;
     String indexNum;
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_time_line);
-        setTitle("사용자의 동선이동 타임라인");
 
         //액션바 안보이게 지정
         ActionBar actionBar = getSupportActionBar();
@@ -81,7 +83,7 @@
         txtBuilding = findViewById(R.id.txtBuilding);
         txtFloor = findViewById(R.id.txtFloor);
         txtTime = findViewById(R.id.txtTime);
-        txtUserNumber = findViewById(R.id.txtUserNumber);
+        txtUserInfo = findViewById(R.id.txtUserInfo);
         //recyclerview 설정
         mRecyclerView = findViewById(R.id.timeline_view);
         layoutManager = new LinearLayoutManager(this);
@@ -99,7 +101,7 @@
 
     }
     public void getTimeLine() {
-        mDatabase.child("timeline_"+indexNum)
+        mDatabase.child("timeline_"+fStoreStudentNumber)
                 .addValueEventListener(new ValueEventListener() {
                     @Override
                     public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -129,12 +131,10 @@
                     public void onComplete(@NonNull Task<QuerySnapshot> task) {
                         if (task.isSuccessful()) {
                             for (QueryDocumentSnapshot document : task.getResult()) {
+                                fStoreName = (String) document.get("name");
+                                fStoreMajor = (String) document.get("major");
                                 fStoreStudentNumber = (String)document.get("studentnumber");
-                                txtUserNumber.setText(fStoreStudentNumber+"님의 타임라인");
-                                userNumber = txtUserNumber.getText().toString();
-                                int idx = userNumber.indexOf("님");
-                                indexNum = userNumber.substring(0,idx);
-                                Log.d(TAG+"", indexNum);
+                                txtUserInfo.setText(fStoreMajor + " "+fStoreName + " 님의 타임라인");
                                 getTimeLine();
                             }
                         } else {
Index: app/src/main/res/layout/activity_time_line.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:background=\"@color/colorWhite\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".TimeLineActivity\">\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n        <TextView\r\n            android:background=\"@color/colorWhite\"\r\n            android:id=\"@+id/txtUserNumber\"\r\n            android:layout_width=\"0sp\"\r\n            android:layout_height=\"60sp\"\r\n            android:layout_weight=\"1\"\r\n            android:text=\"학번\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:textStyle=\"bold\"\r\n            android:gravity=\"center\"\r\n            android:textSize=\"30dp\">\r\n    </TextView>\r\n    </LinearLayout>\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_margin=\"10dp\">\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/timeline_view\"\r\n        tools:listitem=\"@layout/timeline_item\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_width=\"match_parent\"\r\n        app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"/>\r\n   </LinearLayout>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_time_line.xml	(revision a304322ddbd1c4747b1b27ebca1a0550b25ed29d)
+++ app/src/main/res/layout/activity_time_line.xml	(date 1606501058871)
@@ -11,8 +11,8 @@
         android:layout_width="match_parent"
         android:layout_height="wrap_content">
         <TextView
-            android:background="@color/colorWhite"
-            android:id="@+id/txtUserNumber"
+            android:background="@drawable/itemdraw"
+            android:id="@+id/txtUserInfo"
             android:layout_width="0sp"
             android:layout_height="60sp"
             android:layout_weight="1"
@@ -20,7 +20,9 @@
             android:layout_gravity="center_horizontal"
             android:textStyle="bold"
             android:gravity="center"
-            android:textSize="30dp">
+            android:layout_margin="5dp"
+            android:padding="5dp"
+            android:textSize="25dp">
     </TextView>
     </LinearLayout>
     <LinearLayout
Index: app/src/main/res/values/colors.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <color name=\"colorPrimary\">#6200EE</color>\r\n    <color name=\"colorPrimaryDark\">#3700B3</color>\r\n    <color name=\"colorAccent\">#03DAC5</color>\r\n    <color name=\"colorMint\">#B4E6B6</color>\r\n    <color name=\"colorWhite\">#FFFFFF</color>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/colors.xml	(revision a304322ddbd1c4747b1b27ebca1a0550b25ed29d)
+++ app/src/main/res/values/colors.xml	(date 1606501058866)
@@ -5,4 +5,5 @@
     <color name="colorAccent">#03DAC5</color>
     <color name="colorMint">#B4E6B6</color>
     <color name="colorWhite">#FFFFFF</color>
+    <color name="colorWeakMint">#B4F3E7</color>
 </resources>
\ No newline at end of file
Index: app/src/main/res/drawable/itemdraw.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/itemdraw.xml	(date 1606501050932)
+++ app/src/main/res/drawable/itemdraw.xml	(date 1606501050932)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="utf-8"?>
+<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
+    <item>
+        <shape android:shape="rectangle">
+            <stroke android:width="5dp"
+                    android:color="@color/colorWeakMint">
+            </stroke>
+        </shape>
+    </item>
+</layer-list>
\ No newline at end of file
